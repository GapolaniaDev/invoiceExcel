import{_ as P,r,u as J,o as b,c as N,w as n,a as e,b as a,I as O,d as j,e as C,f as q,g as z,h as M,i as E,j as T,k as d,l as s,m as K,n as _,p as U,q as F,s as G}from"./index-Cvnfh86H.js";import{g as Q,a as W,b as X}from"./utils-D8Pr0Uo0.js";const Y={__name:"HomePage",setup(Z){const V=r(!1),D=r(null),h=r(null),R=r(!1);R.value=!1;const u=J(),S=u.state.mainExcel,w=u.state.itemExcel;u.commit("setInvoiceNumber",Q(new Date));const m=u.state.employee,i=u.state.company,p=r(null),f=r(null),v=r(!1),c=r(!0),g=r(128),I=r(96),A=()=>{const o=localStorage.getItem("cleaningSelections");if(o){const l=JSON.parse(o);v.value=l.kitchen||!1,c.value=l.night!==void 0?l.night:!0,g.value=l.kitchenRate||128,I.value=l.nightRate||96}},y=()=>{const o={kitchen:v.value,night:c.value,kitchenRate:g.value,nightRate:I.value};localStorage.setItem("cleaningSelections",JSON.stringify(o)),V.value&&k()},k=()=>{if(u.dispatch("actionRemoveItemsKitchen"),u.dispatch("actionRemoveItemsNights"),!v.value&&!c.value){alert("Debe seleccionar al menos un tipo de limpieza");return}v.value&&H(),c.value&&L()};A();const B=o=>{setTimeout(()=>{o.target.complete()},2e3)},H=()=>{u.dispatch("actionRemoveItemsKitchen"),D.value=W(new Date(f.value),new Date(p.value)),D.value.forEach(o=>{const l={id:null,date:o.date,room:o.room,type:"1",description:o.description,time:"",amount:g.value};u.commit("setItem",l),u.commit("SetNewItem",w),u.dispatch("calculateTotal")})},L=()=>{h.value=X(new Date(f.value),new Date(p.value)),h.value.forEach(o=>{const l={id:null,date:o.date,room:o.room,type:"1",description:o.description,time:"",amount:I.value};u.commit("setItem",l),u.commit("SetNewItem",w),u.dispatch("calculateTotal")})},x=()=>{u.commit("setStartDate",f.value),u.commit("setEndDate",p.value),u.commit("setInvoiceNumber",new Date(f.value||Date())),V.value=!0,(!f.value||!p.value)&&(V.value=!1);const o=new Date(f.value),l=new Date(p.value);(isNaN(o.getTime())||isNaN(l.getTime()))&&(V.value=!1),o>=l&&(V.value=!1),V.value&&k()};return(o,l)=>(b(),N(e(G),null,{default:n(()=>[a(e(q),null,{default:n(()=>[a(e(O),null,{default:n(()=>[a(e(j),null,{default:n(()=>[C("Make your invoice")]),_:1})]),_:1})]),_:1}),a(e(F),{class:"ion-padding"},{default:n(()=>[a(e(z),{slot:"fixed",onIonRefresh:l[0]||(l[0]=t=>B(t))},{default:n(()=>[a(e(M))]),_:1}),a(e(E),{class:"ion-padding"},{default:n(()=>[a(e(T),null,{default:n(()=>[a(e(d),null,{default:n(()=>[a(e(s),{label:"Name",modelValue:e(m).name,"onUpdate:modelValue":l[1]||(l[1]=t=>e(m).name=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Last name",modelValue:e(m).lastname,"onUpdate:modelValue":l[2]||(l[2]=t=>e(m).lastname=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"ABN",modelValue:e(m).abn,"onUpdate:modelValue":l[3]||(l[3]=t=>e(m).abn=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Start",type:"date",modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=t=>f.value=t),onChange:x},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"End",type:"date",modelValue:p.value,"onUpdate:modelValue":l[5]||(l[5]=t=>p.value=t),onChange:x},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"BSB",modelValue:e(m).bsb,"onUpdate:modelValue":l[6]||(l[6]=t=>e(m).bsb=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"ACC",modelValue:e(m).acc,"onUpdate:modelValue":l[7]||(l[7]=t=>e(m).acc=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(K),null,{default:n(()=>[C("Kitchen Cleaning")]),_:1}),a(e(_),{modelValue:v.value,"onUpdate:modelValue":l[8]||(l[8]=t=>v.value=t),onIonChange:y},null,8,["modelValue"])]),_:1}),v.value?(b(),N(e(d),{key:0},{default:n(()=>[a(e(s),{label:"Kitchen Cleaning Rate (per hour)",type:"number",modelValue:g.value,"onUpdate:modelValue":l[9]||(l[9]=t=>g.value=t),placeholder:"128",onIonInput:y},null,8,["modelValue"])]),_:1})):U("",!0),a(e(d),null,{default:n(()=>[a(e(K),null,{default:n(()=>[C("Night Cleaning")]),_:1}),a(e(_),{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=t=>c.value=t),onIonChange:y},null,8,["modelValue"])]),_:1}),c.value?(b(),N(e(d),{key:1},{default:n(()=>[a(e(s),{label:"Night Cleaning Rate (per hour)",type:"number",modelValue:I.value,"onUpdate:modelValue":l[11]||(l[11]=t=>I.value=t),placeholder:"96",onIonInput:y},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1})]),_:1}),R.value?(b(),N(e(E),{key:0,class:"ion-padding"},{default:n(()=>[a(e(T),null,{default:n(()=>[a(e(d),null,{default:n(()=>[a(e(s),{label:"To",modelValue:e(i).name,"onUpdate:modelValue":l[12]||(l[12]=t=>e(i).name=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Address",modelValue:e(i).address,"onUpdate:modelValue":l[13]||(l[13]=t=>e(i).address=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).city,"onUpdate:modelValue":l[14]||(l[14]=t=>e(i).city=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).stateA,"onUpdate:modelValue":l[15]||(l[15]=t=>e(i).stateA=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).postcode,"onUpdate:modelValue":l[16]||(l[16]=t=>e(i).postcode=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(S).invoiceNumber,"onUpdate:modelValue":l[17]||(l[17]=t=>e(S).invoiceNumber=t),readonly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1}))}},le=P(Y,[["__scopeId","data-v-ce0e5500"]]);export{le as default};
