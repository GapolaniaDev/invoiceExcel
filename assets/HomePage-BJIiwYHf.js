import{_ as K,r as f,u as H,o as w,c as x,w as n,a as e,b as a,I as L,d as P,e as g,f as J,g as O,h as j,i as E,j as T,k as d,l as s,m as k,n as _,p as q,q as z,s as M}from"./index-DdmwtFFq.js";import{g as F,a as G,b as Q}from"./utils--6ADdbbb.js";const W={__name:"HomePage",setup(X){const p=f(!1),I=f(null),b=f(null),y=f(!1);y.value=!1;const u=H(),N=u.state.mainExcel,C=u.state.itemExcel;u.commit("setInvoiceNumber",F(new Date));const m=u.state.employee,i=u.state.company,c=f(null),r=f(null),v=f(!1),V=f(!0),h=()=>{const o=localStorage.getItem("cleaningSelections");if(o){const l=JSON.parse(o);v.value=l.kitchen||!1,V.value=l.night!==void 0?l.night:!0}},D=()=>{const o={kitchen:v.value,night:V.value};localStorage.setItem("cleaningSelections",JSON.stringify(o)),p.value&&S()},S=()=>{if(u.dispatch("actionRemoveItemsKitchen"),u.dispatch("actionRemoveItemsNights"),!v.value&&!V.value){alert("Debe seleccionar al menos un tipo de limpieza");return}v.value&&A(),V.value&&B()};h();const R=o=>{setTimeout(()=>{o.target.complete()},2e3)},A=()=>{u.dispatch("actionRemoveItemsKitchen"),I.value=G(new Date(r.value),new Date(c.value)),I.value.forEach(o=>{const l={id:null,date:o.date,room:o.room,type:"1",description:o.description,time:"",amount:o.amount};u.commit("setItem",l),u.commit("SetNewItem",C),u.dispatch("calculateTotal")})},B=()=>{b.value=Q(new Date(r.value),new Date(c.value)),b.value.forEach(o=>{const l={id:null,date:o.date,room:o.room,type:"1",description:o.description,time:"",amount:o.amount};u.commit("setItem",l),u.commit("SetNewItem",C),u.dispatch("calculateTotal")})},U=()=>{u.commit("setStartDate",r.value),u.commit("setEndDate",c.value),u.commit("setInvoiceNumber",new Date(r.value||Date())),p.value=!0,(!r.value||!c.value)&&(p.value=!1);const o=new Date(r.value),l=new Date(c.value);(isNaN(o.getTime())||isNaN(l.getTime()))&&(p.value=!1),o>=l&&(p.value=!1),p.value&&S()};return(o,l)=>(w(),x(e(M),null,{default:n(()=>[a(e(J),null,{default:n(()=>[a(e(L),null,{default:n(()=>[a(e(P),null,{default:n(()=>[g("Make your invoice")]),_:1})]),_:1})]),_:1}),a(e(z),{class:"ion-padding"},{default:n(()=>[a(e(O),{slot:"fixed",onIonRefresh:l[0]||(l[0]=t=>R(t))},{default:n(()=>[a(e(j))]),_:1}),a(e(E),{class:"ion-padding"},{default:n(()=>[a(e(T),null,{default:n(()=>[a(e(d),null,{default:n(()=>[a(e(s),{label:"Name",modelValue:e(m).name,"onUpdate:modelValue":l[1]||(l[1]=t=>e(m).name=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Last name",modelValue:e(m).lastname,"onUpdate:modelValue":l[2]||(l[2]=t=>e(m).lastname=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"ABN",modelValue:e(m).abn,"onUpdate:modelValue":l[3]||(l[3]=t=>e(m).abn=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Start",type:"date",modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=t=>r.value=t),onChange:U},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"End",type:"date",modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=t=>c.value=t),onChange:U},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"BSB",modelValue:e(m).bsb,"onUpdate:modelValue":l[6]||(l[6]=t=>e(m).bsb=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"ACC",modelValue:e(m).acc,"onUpdate:modelValue":l[7]||(l[7]=t=>e(m).acc=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(k),null,{default:n(()=>[g("Kitchen Cleaning")]),_:1}),a(e(_),{modelValue:v.value,"onUpdate:modelValue":l[8]||(l[8]=t=>v.value=t),onIonChange:D},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(k),null,{default:n(()=>[g("Night Cleaning")]),_:1}),a(e(_),{modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=t=>V.value=t),onIonChange:D},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),y.value?(w(),x(e(E),{key:0,class:"ion-padding"},{default:n(()=>[a(e(T),null,{default:n(()=>[a(e(d),null,{default:n(()=>[a(e(s),{label:"To",modelValue:e(i).name,"onUpdate:modelValue":l[10]||(l[10]=t=>e(i).name=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{label:"Address",modelValue:e(i).address,"onUpdate:modelValue":l[11]||(l[11]=t=>e(i).address=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).city,"onUpdate:modelValue":l[12]||(l[12]=t=>e(i).city=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).stateA,"onUpdate:modelValue":l[13]||(l[13]=t=>e(i).stateA=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(i).postcode,"onUpdate:modelValue":l[14]||(l[14]=t=>e(i).postcode=t),readonly:!0},null,8,["modelValue"])]),_:1}),a(e(d),null,{default:n(()=>[a(e(s),{modelValue:e(N).invoiceNumber,"onUpdate:modelValue":l[15]||(l[15]=t=>e(N).invoiceNumber=t),readonly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1}))}},$=K(W,[["__scopeId","data-v-229bd73f"]]);export{$ as default};
